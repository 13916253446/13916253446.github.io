(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F709:function(s,a,t){s.exports=t("qUq0")},TPV2:function(s,a,t){"use strict";t.r(a);var n=t("F709"),r={name:"ES6ForAwait",components:{md:t.n(n).a}},l=t("JFUb");var e=function(s){t("yMNX")},v=Object(l.a)(r,function(){var s=this.$createElement,a=this._self._c||s;return a("div",[a("md")],1)},[],!1,e,"data-v-23aded78",null);a.default=v.exports},lLjV:function(s,a,t){(s.exports=t("I1BE")(!1)).push([s.i,"",""])},qUq0:function(s,a,t){"use strict";t.r(a);var n=t("JFUb"),r=Object(n.a)(null,function(){var s=this;s.$createElement;s._self._c;return s._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h3",{attrs:{id:"na-xie-bian-li-de-fang-shi-ke-yi-shi-xian-chuan-xing-de-fang-shi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#na-xie-bian-li-de-fang-shi-ke-yi-shi-xian-chuan-xing-de-fang-shi","aria-hidden":"true"}},[s._v("¶")]),s._v(" 哪些遍历的方式可以实现串行的方式")]),s._v(" "),t("p",[s._v("异步函数在循环中执行，而且要以串行的方式，只能用"),t("code",{pre:!0},[s._v("for")]),s._v(","),t("code",{pre:!0},[s._v("for...in")]),s._v(","),t("code",{pre:!0},[s._v("for...of")]),s._v("这几种方法才可以，因为别的遍历方式都是在"),t("code",{pre:!0},[s._v("for")]),s._v("的基础上重构的，没有办法，让重构的方法变成"),t("code",{pre:!0},[s._v("async")]),s._v("方法")]),s._v(" "),t("p",[s._v("这几种原生遍历的方式是可以的实现串行的")]),s._v(" "),t("pre",{pre:!0},[t("code",{attrs:{class:"hljs language-javascript"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" arr = ["),t("span",{attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("3")]),s._v("]\n\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"hljs-title"}},[s._v("test")]),s._v(" ("),t("span",{attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" item "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("of")]),s._v(" arr) {\n    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-params"}},[s._v("resolve")]),s._v(" =>")]),s._v(" {\n      setTimeout("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n        "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(item)\n        resolve()\n      }, "),t("span",{attrs:{class:"hljs-number"}},[s._v("1000")]),s._v(")\n    })\n  }\n  "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{attrs:{class:"hljs-string"}},[s._v("'完毕'")]),s._v(")\n}\n\ntest()\n")])]),s._v(" "),t("p",[s._v("看下"),t("code",{pre:!0},[s._v("forEach")]),s._v("的实现方式就知道这些重构过后的遍历，是不可以实现串行异步的")]),s._v(" "),t("pre",{pre:!0},[t("code",{attrs:{class:"hljs language-javascript"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" arr = ["),t("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("3")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-number"}},[s._v("5")]),s._v("]\n"),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".prototype.forEach = "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("fn")]),s._v(")")]),s._v("{\n    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" len = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".length;\n    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v("("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < len; i ++){\n        "),t("span",{attrs:{class:"hljs-comment"}},[s._v("//将元素传给回调函数")]),s._v("\n        fn("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("[i],i);\n    }\n}\narr.forEach("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{attrs:{class:"hljs-params"}},[s._v("ele, index")]),s._v(")")]),s._v("{\n    "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(ele, index);\n})\n")])]),s._v(" "),t("p",[s._v("可以看到，无论你传递给"),t("code",{pre:!0},[s._v("forEach")]),s._v("的回调函数，是不是异步的函数，都将在内部遍历的时候，持续被调用，不存在等待的现象")]),s._v(" "),t("h3",{attrs:{id:"shi-xian-bing-xing-zhi-xing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shi-xian-bing-xing-zhi-xing","aria-hidden":"true"}},[s._v("¶")]),s._v(" 实现并行执行")]),s._v(" "),t("p",[s._v("要实现并行执行，而且需要知道执行完毕的时机，基本上所有的遍历配合"),t("code",{pre:!0},[s._v("Promise.allo")]),s._v("都可以实现")]),s._v(" "),t("pre",{pre:!0},[t("code",{attrs:{class:"hljs language-javascript"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"hljs-title"}},[s._v("test")]),s._v(" ("),t("span",{attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" promises = arr.map(delayedLog)\n  "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v(".all(promises)\n  "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{attrs:{class:"hljs-string"}},[s._v("'完毕'")]),s._v(")\n}\n")])])])}],!1,null,null,null);a.default=r.exports},yMNX:function(s,a,t){var n=t("lLjV");"string"==typeof n&&(n=[[s.i,n,""]]),n.locals&&(s.exports=n.locals);(0,t("SZ7m").default)("6dce334c",n,!0,{})}}]);